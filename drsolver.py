from z3 import *
solver=Solver()
b = Int("b")
m = Int("m")
solver.add(m == 100)
j = Int("j")
n = Int("n")
solver.add(n == 100)
i = Int("i")
argv = Int("argv")
argc = Int("argc")
DRD_RANDOM_VAR = Int("DRD_RANDOM_VAR")
wr_arr_index_0_0 = Int("wr_arr_index_0_0")
wr_arr_index_0_1 = Int("wr_arr_index_0_1")
i_drdVar_10 = Int("i_drdVar_10")
j_drdVar_10 = Int("j_drdVar_10")
solver.add((j_drdVar_10>=0),(j_drdVar_10<m))
i_drdVar_9 = Int("i_drdVar_9")
j_drdVar_9 = Int("j_drdVar_9")
solver.add((j_drdVar_9>=0),(j_drdVar_9<m))
solver.add((i_drdVar_10>=1),(i_drdVar_10<n))
solver.add((i_drdVar_9>=1),(i_drdVar_9<n))
wr_cond_0_0 = And (wr_arr_index_0_0 == i_drdVar_9, True)
wr_cond_0_1 = And (wr_arr_index_0_1 == j_drdVar_9, True)
waws = False

r_arr_index_0_0 = Int("r_arr_index_0_0")
r_arr_index_0_1 = Int("r_arr_index_0_1")
r_cond_0_0 = And (r_arr_index_0_0 == i_drdVar_10, True)
r_cond_0_1 = And (r_arr_index_0_1 == j_drdVar_10 - 1, True)
raw_cond_0= And( wr_cond_0_0, r_cond_0_0,wr_cond_0_1, r_cond_0_1,
(wr_arr_index_0_0 == r_arr_index_0_0), (i_drdVar_9 != i_drdVar_10), 
(wr_arr_index_0_1 == r_arr_index_0_1))
raws = Or(raw_cond_0)
cstrnts = Or(waws,raws)
solver.add(cstrnts)
if solver.check() == z3.sat:
	print("seems like data race(waw/raw/war) exists within the loop!")
else:
	print("seems like no data race exists (please double check)")
