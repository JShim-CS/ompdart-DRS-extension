from z3 import *
solver=Solver()
g = Int("g")
c = Int("c")
m = Int("m")
k = Int("k")
size = Int("size")
solver.add(size == 100)
array = Int("array")
a = Int("a")
arr = Int("arr")
b = Int("b")
i = Int("i")
j = Int("j")
index = Int("index")
temp = Int("temp")
argc = Int("argc")
rhs = Int("rhs")
argv = Int("argv")
u = Int("u")
DRD_RANDOM_VAR = Int("DRD_RANDOM_VAR")
N = Int("N")
solver.add(N == 100)
wr_arr_index_0_0 = Int("wr_arr_index_0_0")
wr_arr_index_0_1 = Int("wr_arr_index_0_1")
wr_arr_index_0_2 = Int("wr_arr_index_0_2")
wr_arr_index_0_3 = Int("wr_arr_index_0_3")
k_drdVar_26 = Int("k_drdVar_26")
j_drdVar_26 = Int("j_drdVar_26")
m_drdVar_26 = Int("m_drdVar_26")
solver.add((m_drdVar_26>=0),(m_drdVar_26<5))
j_drdVar_20 = Int("j_drdVar_20")
i_drdVar_26 = Int("i_drdVar_26")
k_drdVar_20 = Int("k_drdVar_20")
m_drdVar_20 = Int("m_drdVar_20")
solver.add((m_drdVar_20>=0),(m_drdVar_20<5))
i_drdVar_20 = Int("i_drdVar_20")
i_drdVar_2 = Int("i_drdVar_2")
solver.add((k_drdVar_26>=1),(k_drdVar_26<c))
solver.add((k_drdVar_20>=1),(k_drdVar_20<c))
solver.add((j_drdVar_26>=1),(j_drdVar_26<b))
solver.add((j_drdVar_20>=1),(j_drdVar_20<b))
wr_cond_0_0 = And (wr_arr_index_0_0 == i_drdVar_26, True)
wr_cond_0_1 = And (wr_arr_index_0_1 == i_drdVar_26 * j_drdVar_26, True)
wr_cond_0_2 = And (wr_arr_index_0_2 == i_drdVar_26, True)
wr_cond_0_3 = And (wr_arr_index_0_3 == i_drdVar_26, True)
wr_arr_index_1_0 = Int("wr_arr_index_1_0")
wr_arr_index_1_1 = Int("wr_arr_index_1_1")
wr_arr_index_1_2 = Int("wr_arr_index_1_2")
wr_arr_index_1_3 = Int("wr_arr_index_1_3")
wr_cond_1_0 = And (wr_arr_index_1_0 == i_drdVar_20 - 1, (And(i_drdVar_20>0,g>0)))
wr_cond_1_1 = And (wr_arr_index_1_1 == j_drdVar_20, (And(i_drdVar_20>0,g>0)))
wr_cond_1_2 = And (wr_arr_index_1_2 == k_drdVar_20, (And(i_drdVar_20>0,g>0)))
wr_cond_1_3 = And (wr_arr_index_1_3 == m_drdVar_20, (And(i_drdVar_20>0,g>0)))
waw_cond_0 = And( wr_cond_0_0, wr_cond_1_0,wr_cond_0_1, wr_cond_1_1,wr_cond_0_2, wr_cond_1_2,wr_cond_0_3, wr_cond_1_3,
(wr_arr_index_0_0 == wr_arr_index_1_0), (wr_arr_index_0_1 == wr_arr_index_1_1), (wr_arr_index_0_2 == wr_arr_index_1_2), (wr_arr_index_0_3 == wr_arr_index_1_3))
waws = Or(waw_cond_0)

r_arr_index_0_0 = Int("r_arr_index_0_0")
solver.add()
r_cond_0_0 = And (r_arr_index_0_0 == 2, True)
raws = False
solver.add(i_drdVar_26 != i_drdVar_20)
solver.add(i_drdVar_26 != i_drdVar_2)
solver.add(i_drdVar_20 != i_drdVar_2)
cstrnts = Or(waws,raws)
solver.add(cstrnts)
if solver.check() == z3.sat:
	print("seems like data race(waw/raw/war) exists within the loop!")
else:
	print("seems like no data race exists (please double check)")
