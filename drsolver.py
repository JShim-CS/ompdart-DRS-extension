from z3 import *
solver=Solver()
argv = Int("argv")
argc = Int("argc")
i = Int("i")
arr = Int("arr")
array = Int("array")
size = Int("size")
DRD_RANDOM_VAR = Int("DRD_RANDOM_VAR")
N = Int("N")
solver.add(N == 100)
wr_arr_index_0 = Int("wr_arr_index_0")
i_drdVar_15 = Int("i_drdVar_15")
solver.add((i_drdVar_15>=0),(i_drdVar_15<size-1))
i_drdVar_21 = Int("i_drdVar_21")
solver.add((i_drdVar_21>=0),(i_drdVar_21<size-1))
i_drdVar_11 = Int("i_drdVar_11")
solver.add((i_drdVar_11>=0),(i_drdVar_11<size-1))
wr_cond_0 = And (wr_arr_index_0 == (i_drdVar_21 + 1), (i_drdVar_21==0))
wr_arr_index_1 = Int("wr_arr_index_1")
wr_cond_1 = And (wr_arr_index_1 == (i_drdVar_15), (i_drdVar_15!=0))
wr_arr_index_2 = Int("wr_arr_index_2")
wr_cond_2 = And (wr_arr_index_2 == (i_drdVar_11), (i_drdVar_11!=0))
waw_cond_0 = And( wr_cond_0, (wr_arr_index_0 == wr_arr_index_1), wr_cond_1)
waw_cond_1 = And( wr_cond_0, (wr_arr_index_0 == wr_arr_index_2), wr_cond_2)
waw_cond_2 = And( wr_cond_1, (wr_arr_index_1 == wr_arr_index_2), wr_cond_2)
waws = Or(waw_cond_2, waw_cond_1, waw_cond_0)

raws = False
solver.add(i_drdVar_15 != i_drdVar_21)
solver.add(i_drdVar_15 != i_drdVar_11)
solver.add(i_drdVar_21 != i_drdVar_11)
cstrnts = Or(waws,raws)
solver.add(cstrnts)
if solver.check() == z3.sat:
	print("seems like data race(waw/raw/war) exists within the loop!")
else:
	print("seems like no data race exists (please double check)")
